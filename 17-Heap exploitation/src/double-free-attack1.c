//double-free-attack1.c
#include <stdio.h>
#include <stdlib.h>

struct foo
{
  int num;
};

void main()
{
    struct foo *foo1, *foo2, *foo3, *foo4, *foo5;
    
    foo1 = malloc(sizeof(struct foo));
    foo2 = malloc(sizeof(struct foo));
      
    free(foo1);
    free(foo2);
    free(foo1);
    
    foo3 = malloc(sizeof(struct foo));
    foo4 = malloc(sizeof(struct foo));
    foo5 = malloc(sizeof(struct foo));
    
    foo3->num = 0x1234;
    foo5->num = 0x1337;
    
    printf("foo3->num = 0x%x\n", foo3->num);
}